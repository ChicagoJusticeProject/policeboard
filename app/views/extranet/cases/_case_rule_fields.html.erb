<li class="fields case-rule-fields">  
	<p><strong>Rule <span class="rule_code"><%= f.object.rule.code %></span> (<%= f.object.case_rule_counts.count() %> counts)</strong>: 
	<span class="rule_description"><%= f.object.rule.description %></p><span>
	<%= f.hidden_field :rule_id, class: 'rule_id' %></p>
	
	<div class="form-field" style="display:none;"><%= f.select :rule_id, options_for_select(@rules.map{ |r| [r.item, r.id, {'data-description'=>r.description}] }, selected_key = f.object.rule_id), {} ,{ :name => "rule_select" } %></div>

	<%= f.hidden_field :_destroy %>
	<%= link_to "remove", "#", class: "remove_fields" %>

	<ul class="case-rule-counts">
	  <%= f.fields_for :case_rule_counts, f.object.case_rule_counts.order(:count_order) do |builder| %>
	     <%= render "case_rule_count_fields", :f => builder %>
	  <% end %>
	</ul>
	<p>
		<%= link_to_add_fields "Add count to rule #{f.object.rule.code}", f, :case_rule_counts%>
	</p>
</li>

